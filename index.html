<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Raja Mantri Chor Sipahi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: radial-gradient(circle, #000, #111);
    color: #fff;
    text-align: center;
}

h1 {
    color: gold;
    text-shadow: 0 0 15px gold;
}

.container {
    max-width: 500px;
    margin: auto;
    padding: 20px;
}

button {
    padding: 12px 20px;
    margin: 10px;
    border: none;
    border-radius: 25px;
    font-weight: bold;
    cursor: pointer;
    background: gold;
    color: #000;
}

button:hover {
    background: orange;
}

input {
    width: 90%;
    padding: 10px;
    margin: 5px;
    border-radius: 10px;
    border: none;
}

.card {
    border: 2px dashed gold;
    padding: 20px;
    margin: 15px 0;
    font-size: 24px;
    display: none;
}

.hidden { display: none; }

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
}

table, th, td {
    border: 1px solid gold;
}

th {
    background: gold;
    color: black;
}

th, td {
    padding: 8px;
}
</style>
</head>

<body>

<h1>ğŸ‘‘ Raja Mantri Chor Sipahi ğŸ‘‘</h1>

<audio id="suspense" loop>
    <source src="suspense.mp3" type="audio/mpeg">
</audio>

<div class="container">

<!-- SETUP -->
<div id="setup">
    <p>Enter Player Names</p>
    <input id="p0" placeholder="Player 1">
    <input id="p1" placeholder="Player 2">
    <input id="p2" placeholder="Player 3">
    <input id="p3" placeholder="Player 4">
    <button onclick="startGame()">Start Game</button>
</div>

<!-- ROLE SCREEN -->
<div id="roleScreen" class="hidden">
    <p id="turnText"></p>
    <button onclick="getRole()">Get Role</button>
    <div id="roleCard" class="card"></div>
    <button onclick="nextPlayer()">Next Player</button>
</div>

<!-- SIPAHI GUESS -->
<div id="guessScreen" class="hidden">
    <h3>ğŸª– Sipahi, catch the Chor</h3>
    <p>Choose between Mantri and Chor</p>
    <div id="guessBtns"></div>
</div>

<!-- RESULT -->
<div id="resultScreen" class="hidden">
    <h2 id="resultText"></h2>
    <button onclick="nextRound()">Next Round</button>
</div>

<!-- SCORE TABLE -->
<div id="scoreBoard" class="hidden">
    <h3>ğŸ† Points Table</h3>
    <table>
        <tr>
            <th>Player</th>
            <th>Role</th>
            <th>Points</th>
        </tr>
        <tbody id="scoreTable"></tbody>
    </table>
</div>

</div>

<script>
let players = [];
let roles = [];
let points = [0,0,0,0];
let current = 0;

let raja, sipahi, mantri, chor;

function startGame() {
    for (let i=0;i<4;i++) {
        players[i] = document.getElementById("p"+i).value || "Player "+(i+1);
    }
    document.getElementById("setup").classList.add("hidden");
    newRound();
}

function newRound() {
    roles = ["Raja","Sipahi","Mantri","Chor"];
    roles.sort(()=>Math.random()-0.5);

    raja = roles.indexOf("Raja");
    sipahi = roles.indexOf("Sipahi");
    mantri = roles.indexOf("Mantri");
    chor = roles.indexOf("Chor");

    current = 0;
    document.getElementById("roleScreen").classList.remove("hidden");
    updateTurn();
}

function updateTurn() {
    document.getElementById("roleCard").style.display = "none";
    document.getElementById("turnText").innerText =
        players[current] + ", click Get Role";
}

function getRole() {
    let card = document.getElementById("roleCard");
    card.style.display = "block";

    if (current === raja) {
        card.innerText = "ğŸ‘‘ Raja (Visible)";
    } else if (current === sipahi) {
        card.innerText = "ğŸª– Sipahi";
    } else if (current === mantri) {
        card.innerText = "ğŸ§  Mantri (Hidden)";
    } else {
        card.innerText = "ğŸ•µï¸ Chor (Hidden)";
    }
}

function nextPlayer() {
    current++;
    if (current < 4) {
        updateTurn();
    } else {
        document.getElementById("roleScreen").classList.add("hidden");
        startGuess();
    }
}

function startGuess() {
    document.getElementById("guessScreen").classList.remove("hidden");
    document.getElementById("suspense").play();

    let box = document.getElementById("guessBtns");
    box.innerHTML = "";

    [mantri, chor].forEach(i=>{
        let btn = document.createElement("button");
        btn.innerText = players[i];
        btn.onclick = ()=>checkGuess(i);
        box.appendChild(btn);
    });
}

function checkGuess(i) {
    document.getElementById("suspense").pause();
    document.getElementById("guessScreen").classList.add("hidden");
    document.getElementById("resultScreen").classList.remove("hidden");

    if (i === chor) {
        points[raja] += 100;
        points[sipahi] += 50;
        document.getElementById("resultText").innerText =
            "ğŸ‰ Sipahi caught the Chor!";
    } else {
        points[chor] += 150;
        document.getElementById("resultText").innerText =
            "ğŸ˜ˆ Chor escaped!";
    }

    updateTable();
}

function updateTable() {
    document.getElementById("scoreBoard").classList.remove("hidden");
    let t = document.getElementById("scoreTable");
    t.innerHTML = "";

    for (let i=0;i<4;i++) {
        t.innerHTML += `
        <tr>
            <td>${players[i]}</td>
            <td>${roles[i]}</td>
            <td>${points[i]}</td>
        </tr>`;
    }
}

function nextRound() {
    document.getElementById("resultScreen").classList.add("hidden");
    newRound();
}
</script>

</body>
</html>
