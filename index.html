<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Raja Mantri Chor Sipahi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(120deg, #000, #111, #000);
    color: #fff;
    text-align: center;
}

h1 {
    color: gold;
    text-shadow: 0 0 10px gold;
}

.container {
    max-width: 500px;
    margin: auto;
    padding: 20px;
}

button {
    padding: 12px 20px;
    margin: 10px;
    border: none;
    border-radius: 25px;
    font-weight: bold;
    cursor: pointer;
    background: gold;
    color: #000;
}

button:hover {
    background: orange;
}

input {
    padding: 10px;
    width: 90%;
    margin: 5px;
    border-radius: 10px;
    border: none;
}

.card {
    border: 2px dashed gold;
    padding: 20px;
    margin: 15px 0;
    font-size: 22px;
    display: none;
}

.hidden { display: none; }

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
}

table, th, td {
    border: 1px solid gold;
}

th, td {
    padding: 8px;
}

th {
    background: gold;
    color: #000;
}

footer {
    margin-top: 20px;
    font-size: 12px;
    color: #aaa;
}
</style>
</head>

<body>

<h1>üëë Raja Mantri Chor Sipahi üëë</h1>

<audio id="bgm" loop>
    <source src="music.mp3" type="audio/mpeg">
</audio>

<div class="container">

<!-- PLAYER SETUP -->
<div id="setup">
    <p>Enter Player Names</p>
    <input id="p0" placeholder="Player 1 Name">
    <input id="p1" placeholder="Player 2 Name">
    <input id="p2" placeholder="Player 3 Name">
    <input id="p3" placeholder="Player 4 Name">
    <button onclick="startGame()">Start Game</button>
</div>

<!-- ROLE SCREEN -->
<div id="roleScreen" class="hidden">
    <p id="playerTurn"></p>
    <div id="roleCard" class="card"></div>
    <button onclick="nextPlayer()">Next</button>
</div>

<!-- GUESS SCREEN -->
<div id="guessScreen" class="hidden">
    <p><b>Mantri, guess the Chor</b></p>
    <div id="guessButtons"></div>
</div>

<!-- RESULT -->
<div id="resultScreen" class="hidden">
    <h2 id="resultText"></h2>
    <button onclick="nextRound()">Next Round</button>
</div>

<!-- POINTS TABLE -->
<div id="scoreBoard" class="hidden">
    <h3>üèÜ Points Table</h3>
    <table>
        <tr>
            <th>Player</th>
            <th>Role</th>
            <th>Points</th>
        </tr>
        <tbody id="scoreTable"></tbody>
    </table>
</div>

</div>

<footer>
Classic Indian Game ‚Ä¢ Single-File Web Project
</footer>

<script>
let players = [];
let roles = [];
let points = [0,0,0,0];
let current = 0;
let chorIndex = -1;
let mantriIndex = -1;

function startGame() {
    for (let i=0;i<4;i++) {
        let name = document.getElementById("p"+i).value;
        players[i] = name || "Player "+(i+1);
    }

    document.getElementById("bgm").play();
    document.getElementById("setup").classList.add("hidden");
    newRound();
}

function newRound() {
    roles = ["Raja","Mantri","Chor","Sipahi"];
    roles.sort(()=>Math.random()-0.5);

    chorIndex = roles.indexOf("Chor");
    mantriIndex = roles.indexOf("Mantri");

    current = 0;
    document.getElementById("roleScreen").classList.remove("hidden");
    showRole();
}

function showRole() {
    document.getElementById("playerTurn").innerText =
        players[current] + ", tap to see your role";
    let card = document.getElementById("roleCard");
    card.style.display = "block";
    card.innerText = roles[current];
}

function nextPlayer() {
    current++;
    if (current < 4) {
        showRole();
    } else {
        document.getElementById("roleScreen").classList.add("hidden");
        showGuess();
    }
}

function showGuess() {
    document.getElementById("guessScreen").classList.remove("hidden");
    let box = document.getElementById("guessButtons");
    box.innerHTML = "";

    for (let i=0;i<4;i++) {
        if (i !== mantriIndex) {
            let btn = document.createElement("button");
            btn.innerText = players[i];
            btn.onclick = ()=>makeGuess(i);
            box.appendChild(btn);
        }
    }
}

function makeGuess(i) {
    document.getElementById("guessScreen").classList.add("hidden");
    document.getElementById("resultScreen").classList.remove("hidden");

    if (i === chorIndex) {
        points[mantriIndex] += 50;
        points[roles.indexOf("Raja")] += 100;
        document.getElementById("resultText").innerText =
            "üéâ Chor Caught!";
    } else {
        points[chorIndex] += 150;
        document.getElementById("resultText").innerText =
            "üòà Chor Escaped!";
    }

    updateTable();
}

function updateTable() {
    document.getElementById("scoreBoard").classList.remove("hidden");
    let table = document.getElementById("scoreTable");
    table.innerHTML = "";

    for (let i=0;i<4;i++) {
        table.innerHTML += `
        <tr>
            <td>${players[i]}</td>
            <td>${roles[i]}</td>
            <td>${points[i]}</td>
        </tr>`;
    }
}

function nextRound() {
    document.getElementById("resultScreen").classList.add("hidden");
    newRound();
}
</script>

</body>
</html>
